<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>Server Invoke Demo</title>
</head>

<body>
    <div id="response"></div>

    <script src="../../node_modules/requirejs/require.js"></script>
    <script>
        requirejs.config({
            paths: {
                'react': "../../node_modules/react/umd/react.development",
                'react-dom': "../../node_modules/react-dom/umd/react-dom.development",
                'src/remote/invoke': "./main"
            }
        });

        requirejs(['react', 'react-dom', 'src/remote/invoke'], function (React, ReactDOM, invoke) {

            var request = new invoke.InvokeRequest(1, 
                    new invoke.OperationType('run', 'void', []),
                    []);

                    console.log(JSON.stringify(request));

            // Example POST method implementation:
            async function postData(url = '', data = {}) {
                // Default options are marked with *
                const response = await fetch(url, {
                    method: 'POST', // *GET, POST, PUT, DELETE, etc.
                    mode: 'cors', // no-cors, *cors, same-origin
                    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
                    credentials: 'include', // include, *same-origin, omit
                    headers: {
                        'Content-Type': 'application/json'
                        // 'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    redirect: 'follow', // manual, *follow, error
                    referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url
                    body: JSON.stringify(data) // body data type must match "Content-Type" header
                });

                const json = await response.json(); // parses JSON response into native JavaScript objects

                // now you can render your React elements
                ReactDOM.render(
                    React.createElement('p', {}, JSON.stringify(json)),
                    document.getElementById('response')
                );

            };

            postData('http://localhost:8080/invoke', request);
        });

    </script>

</body>

</html>